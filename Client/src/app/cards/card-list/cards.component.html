<div class="container mt-5">
  <div class="card">
    <div class="card-body">
      <h1 class="card-title">
        {{pageTitle}}
      </h1>
      <div class="card-title mb-5">
        <form class="form-inline">
          <strong class="mr-sm-2">Search by rarity:</strong>
          <select class="form-control my-2 mr-sm-2" (change)='onRarityChange($event.target.value)'>
            <option value="all">All</option>
            <option value="common">Common</option>
            <option value="rare">Rare</option>
            <option value="epic">Epic</option>
            <option value="legendary">Legendary</option>
          </select>
          <input name="filterKeyword" class="form-control mr-sm-2"
            type="search" placeholder="Type card name or type here..." aria-label="Search" [(ngModel)]="searchTerm"
            [ngbTypeahead]="searchTypeahead">
          <span *ngIf="searching">searching...</span>
        </form>
      </div>

      <ng-container *ngIf="vm$ | async as vm">
        <div class="container mb-5">
          <h3 class="text-primary">Troops <span class="badge badge-danger">{{vm.cardsTroop.length}}</span>
          </h3>
          <hr>
          <div class="row no-gutters">
            <div class="col-md-1 col-4 hover-effect" *ngFor='let card of vm.cardsTroop'>
              <a class="d-block mb-1">
                <figure>
                  <img class="img-fluid img-thumbnail" [src]='card.imageUrl' [title]='card.name' [alt]='card.name'
                    [routerLink]="['/cards', card.id]" />
                </figure>
              </a>
            </div>
          </div>
        </div>

        <div class="container mb-5">
          <h3 class="text-primary">Spells <span class="badge badge-danger">{{vm.cardsSpell.length}}</span>
          </h3>
          <hr>
          <div class="row no-gutters">
            <div class="col-md-1 col-4 hover-effect" *ngFor='let card of vm.cardsSpell'>
              <a class="d-block mb-1">
                <figure>
                  <img class="img-fluid img-thumbnail" [src]='card.imageUrl' [title]='card.name' [alt]='card.name'
                    [routerLink]="['/cards', card.id]" />
                </figure>
              </a>
            </div>
          </div>
        </div>

        <div class="container mb-5">
          <h3 class="text-primary">Buildings <span class="badge badge-danger">{{vm.cardsBuilding.length}}</span>
          </h3>
          <hr>
          <div class="row no-gutters">
            <div class="col-md-1 col-4 hover-effect" *ngFor='let card of vm.cardsBuilding'>
              <a class="d-block mb-1">
                <figure>
                  <img class="img-fluid img-thumbnail" [src]='card.imageUrl' [title]='card.name' [alt]='card.name'
                    [routerLink]="['/cards', card.id]" />
                </figure>
              </a>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
</div>
<ngx-spinner type="ball-clip-rotate-pulse">
  <p style="color: white"> Loading list of cards... </p>
</ngx-spinner>